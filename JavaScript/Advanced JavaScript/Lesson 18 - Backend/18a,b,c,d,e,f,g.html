<!DOCTYPE html>
<html>

<head>
  <title>Document</title>
</head>

<body>
  <script>
    // const xhr = new XMLHttpRequest()
    // xhr.addEventListener('load', () => {
    //   console.log(xhr.response);
    // })
    // xhr.open('GET', 'https://supersimplebackend.dev/greeting');
    // xhr.send();

    // fetch('https://supersimplebackend.dev/greeting').then((response) => {
    //   return response.text();
    // }).then((text) => {
    //   console.log(text);
    // })

    // async function loadGreeting() {

    //   const response = await fetch('https://supersimplebackend.dev/greeting')

    //   const greeting = await response.text();

    //   console.log(greeting);

    // }

    // loadGreeting();

    //   async function postMessage(){
    //     const response = await fetch ('https://supersimplebackend.dev/greeting', {
    //       method: 'POST',
    //       headers: {
    //         'Content-Type': 'application/json'
    //       },
    //       body: JSON.stringify({
    //           name: 'Sandeep S'
    //       })  
    //     })
    //     const name = await response.text();

    //     console.log(name);
    //   }

    //  postMessage();
    /*
        async function tryAmazon() {
          try {
            const response = await fetch('https://amazon.com');
    
            const message = await response.text();
    
            console.log(message);
          } catch(error){
              console.log('CORS error. Your request was blocked by the backend');
          }  
        }
    
        tryAmazon();
    
    */

    async function postGreeting() {
      try {
        const response = await fetch('https://supersimplebackend.dev/greeting', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
        });
        if (response.status >= 400) {
          throw reponse;
        }

        const text = await response.text();
        console.log(text);

      } catch (error) {
        if (error.status === 400) {
          const errorMessage = await error.json();
          console.log(errorMessage);
        }

        else {
          console.log('network error');
        }

      }
    }

    postGreeting();

  </script>
</body>

</html>